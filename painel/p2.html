<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Painel – Lume Moda Fitness</title>
<link rel="preconnect" href="https://www.gstatic.com" crossorigin>
<style>
  :root{--ink:#111;--muted:#6b6b6b;--card:#fff;--bg:#f4f6f8;--ring:#e5e7eb}
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg)}
  header{padding:22px 16px;background:#000;color:#fff;text-align:center}
  h1{margin:0;font-size:18px;letter-spacing:.5px}
  .wrap{max-width:1100px;margin:16px auto;padding:12px}
  .grid{
  display:grid;
  grid-template-columns:repeat(4,minmax(0,1fr));
  gap:16px;
}

  .card{background:var(--card);border:1px solid var(--ring);border-radius:14px;overflow:hidden;cursor:pointer;box-shadow:0 1px 2px rgba(0,0,0,.04);transition:.15s transform}
  .card:active{transform:scale(.98)}
  .thumb{aspect-ratio:4/5;background:#fafafa;display:flex;align-items:center;justify-content:center;overflow:hidden}
  .thumb img{width:100%;height:100%;object-fit:cover}
  .meta{padding:12px 12px 14px}
  .meta h3{margin:0 0 6px;font-size:15px;color:var(--ink);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .meta p{margin:0;color:var(--muted);font-size:12px}
  .skeleton{background:linear-gradient(90deg,#eee,#f5f5f5,#eee);background-size:200% 100%;animation:sh 1.2s linear infinite}
  @keyframes sh{to{background-position:-200% 0}}

  /* Mobile tweaks */
 /* MOBILE = sempre 2 colunas de cards pequenos */
@media(max-width:820px){
  .wrap{padding:8px}
  .grid{
    grid-template-columns:repeat(2,minmax(0,1fr));
    gap:10px;
  }
  .card{
    border-radius:14px;
  }
  .thumb{
    aspect-ratio:4/5;
  }
  .meta h3{
    font-size:13px;
  }
  .meta p{
    font-size:10px;
  }
}
.header{
  background:#000;
  color:#fff;
  width:100%;
  padding:14px 0 12px 0;
  text-align:center;
  border-radius:0 0 0 0;
  }

.header .logo{
  width:80px;
  height:80px;
  object-fit:contain;
  margin-bottom:4px;
}

.header h1{
  font-size:17px;
  font-weight:600;
  margin:0;
  letter-spacing:-0.2px;
}





</style>
</head>
<body>

     <div class="header">
    <img src="https://i.imgur.com/dYmnA0X.png" class="logo" />
     </div>

<header><h1>Painel – Produtos</h1></header>
<div class="wrap">
  <div id="grid" class="grid"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBzzYviQCkPUeRSCMZ-sxJiQlKGgUFy8xk",
  authDomain: "lume-moda-fitness.firebaseapp.com",
  projectId: "lume-moda-fitness",
  storageBucket: "lume-moda-fitness.appspot.com",
  messagingSenderId: "485446426887",
  appId: "1:485446426887:web:93ba7f4b9d4f199af7e5a2"
};

const app = initializeApp(firebaseConfig);
/* ⚠️ importante: usa o databaseId "firestore" (o segundo DB do seu projeto) */
const db  = getFirestore(app, "firestore");

const ids = Array.from({length:16}, (_,i)=>`produto${String(i+1).padStart(2,"0")}`);
const grid = document.getElementById('grid');

/* esqueleto enquanto carrega */
ids.forEach(id=>{
  const c = document.createElement('div');
  c.className = 'card';
  c.innerHTML = `
    <div class="thumb skeleton"></div>
    <div class="meta">
      <h3 class="skeleton" style="height:16px;border-radius:6px"></h3>
      <p>${id}</p>
    </div>`;
  grid.appendChild(c);
});

async function load(){
  grid.innerHTML = '';
  for (const id of ids){
    try{
      const ref = doc(db,'produtos', id);
      const snap = await getDoc(ref);
      const data = snap.exists() ? snap.data() : {};
      const img = data.imagem || 'https://via.placeholder.com/600x800?text=Sem+Imagem';
      const nome = data.nome || '(sem nome)';

      const card = document.createElement('div');
      card.className = 'card';
      card.onclick = ()=> location.href = `editor.html?pid=${encodeURIComponent(id)}`;

      card.innerHTML = `
        <div class="thumb"><img src="${img}" alt="${nome}"></div>
        <div class="meta">
          <h3>${nome}</h3>
          <p>${id}</p>
        </div>`;
      grid.appendChild(card);
    }catch(e){
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <div class="thumb"><div class="skeleton" style="width:100%;height:100%"></div></div>
        <div class="meta">
          <h3>Erro ao carregar</h3>
          <p>${id}</p>
        </div>`;
      grid.appendChild(card);
      console.error('Erro produto', id, e);
    }
  }
}
load();
</script>
</body>
</html>
