<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>De 0 a 25</title>

<style>
  :root {
    --bg:#f4f6f8;
    --card:#ffffff;
    --text:#222;
    --primary:#0057A3;
    --disabled:#C7CDD3;
    --starburst:rgba(255,210,0,.9);
  }
  body.dark {
    --bg:#1f2327;
    --card:#2a2f34;
    --text:#e9e9e9;
    --disabled:#575d62;
    --starburst:rgba(255,240,110,.95);
  }

  body {
    margin:0;
    background:var(--bg);
    font-family:Poppins,sans-serif;
    display:flex;align-items:center;justify-content:center;
    height:100vh;padding:12px;
    transition:background .2s ease;
  }

  .card {
    width:100%;max-width:420px;
    background:var(--card);
    border-radius:20px;padding:24px;
    text-align:center;position:relative;
    box-shadow:0 6px 20px rgba(0,0,0,.15);
  }

  h2 {color:var(--text);margin:0 0 12px;}

  /* MENU */
  .menu-btn {
    position:absolute;top:10px;right:10px;
    font-size:22px;background:none;border:none;
    cursor:pointer;color:var(--text);
    z-index:9999;
  }
  .dropdown {
    position:absolute;top:45px;right:10px;
    width:170px;padding:10px;background:var(--card);
    border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.25);
    opacity:0;pointer-events:none;
    transform:translateY(-8px);
    transition:.2s ease;z-index:10000;
  }
  .dropdown.open {opacity:1;pointer-events:auto;transform:translateY(0);}
  .dd-item {display:flex;justify-content:space-between;
    align-items:center;padding:6px 0;color:var(--text);}

  /* Switch */
  .switch {
    width:46px;height:26px;border-radius:20px;
    background:var(--disabled);position:relative;
    cursor:pointer;transition:.2s;
  }
  .switch::after {
    content:"";position:absolute;top:3px;left:3px;
    width:20px;height:20px;border-radius:50%;
    background:#fff;transition:.2s;
  }
  .switch.on {background:var(--primary);}
  .switch.on::after {left:23px;}

  /* GRID */
  .grid {display:grid;gap:8px;margin-top:10px;}
  @media(min-width:500px){.grid{grid-template-columns:repeat(5,1fr)}}
  @media(max-width:499px) and (min-width:390px){.grid{grid-template-columns:repeat(4,1fr)}}
  @media(max-width:389px){.grid{grid-template-columns:repeat(3,1fr)}}

  .num {
    padding:14px;font-size:1rem;border:0;
    border-radius:10px;background:var(--primary);
    color:#fff;cursor:pointer;
    transition:transform .1s;
    position:relative;overflow:hidden;
  }
  .num.disabled {background:var(--disabled)!important;cursor:not-allowed;}
  .num:active:not(.disabled){transform:scale(.9);}

  .btn {
    margin-top:20px;width:100%;
    border:0;border-radius:10px;
    padding:12px;background:#333;
    color:#fff;font-size:1rem;
    cursor:pointer;
  }

  /* FESTA */
  .starburst {
    position:absolute;inset:0;border-radius:50%;
    background:var(--starburst);
    filter:blur(40px);
    animation:burst .9s ease forwards;
    z-index:-1;
  }
  @keyframes burst {
    0%{opacity:0;transform:scale(.1);}
    50%{opacity:.9;transform:scale(1.6);}
    100%{opacity:0;transform:scale(2.5);}
  }

  .confetti {
    width:8px;height:8px;position:absolute;
    border-radius:50%;opacity:1;animation:confetti 1.2s ease forwards;
  }
  @keyframes confetti {
    0%{transform:translateY(0) scale(1);opacity:1;}
    100%{transform:translateY(-60px) scale(.4);opacity:0;}
  }

  @keyframes shake {
    0%,100%{transform:translate(0)}
    25%{transform:translate(4px,-4px)}
    50%{transform:translate(-4px,4px)}
    75%{transform:translate(4px,4px)}
  }

  .win-msg {
    font-size:1.2rem;font-weight:700;
    color:var(--primary);
    margin-top:14px;opacity:0;
    animation:fade .4s ease forwards;
  }
  @keyframes fade {from{opacity:0;}to{opacity:1;}}
</style>
</head>

<body>

<div class="card">

  <!-- MENU -->
  <button class="menu-btn" id="menuBtn">‚â°</button>
  <div class="dropdown" id="dropdown">
    <div class="dd-item">Tema Escuro<div class="switch" id="themeSwitch"></div></div>
    <div class="dd-item">Som<div class="switch on" id="soundSwitch"></div></div>
  </div>

  <h2>De 0 a 25</h2>

  <div id="winText"></div>
  <div class="grid" id="grid"></div>

  <button class="btn" id="restart">Reiniciar</button>
</div>

<!-- √Åudio real üéâ -->
<audio id="sndWin" preload="auto"
  src="https://cdn.pixabay.com/download/audio/2021/09/17/audio_5a0e73d767.mp3?filename=crowd-cheering-90959.mp3">
</audio>

<script>
  let secret=Math.floor(Math.random()*26);
  let audioCtx=null;
  let clickSoundEnabled=true;
  const PREF_THEME="theme";
  const PREF_SOUND="sound";
  const winSnd=document.getElementById("sndWin");

  function enableAudioSystem(){
    if(!audioCtx){
      const AC=window.AudioContext||window.webkitAudioContext;
      if(AC){audioCtx=new AC();}
    }
  }

  function beep(){
    if(!clickSoundEnabled||!audioCtx) return;
    const o=audioCtx.createOscillator(),g=audioCtx.createGain();
    o.type="square";o.frequency.value=1300;
    g.gain.setValueAtTime(0.05,audioCtx.currentTime);
    g.gain.exponentialRampToValueAtTime(0.0001,audioCtx.currentTime+0.07);
    o.connect(g).connect(audioCtx.destination);
    o.start();o.stop(audioCtx.currentTime+0.07);
  }

  const grid=document.getElementById("grid");
  const winText=document.getElementById("winText");
  const menuBtn=document.getElementById("menuBtn");
  const dropdown=document.getElementById("dropdown");
  const themeSwitch=document.getElementById("themeSwitch");
  const soundSwitch=document.getElementById("soundSwitch");

  function buildGrid(){
    grid.innerHTML="";
    winText.innerHTML="";
    for(let i=0;i<=25;i++){
      let b=document.createElement("button");
      b.className="num";
      b.textContent=i;
      b.dataset.v=i;
      b.onclick=()=>pick(b);
      grid.appendChild(b);
    }
  }

  function disableOutside(min,max){
    document.querySelectorAll(".num").forEach(btn=>{
      const v=Number(btn.dataset.v);
      if(v<min||v>max){
        btn.disabled=true;
        btn.classList.add("disabled");
      }
    });
  }

  async function pick(btn){
    enableAudioSystem();
    if(audioCtx&&audioCtx.state==="suspended") await audioCtx.resume();
    beep();

    const v=Number(btn.dataset.v);

    if(v===secret){
      btn.innerHTML=`${v} üç∫`;
      successEffects(btn);

    }else if(v<secret){
      disableOutside(v+1,25);
      btn.classList.add("disabled");
    }else{
      disableOutside(0,v-1);
      btn.classList.add("disabled");
    }

    btn.disabled=true;
  }

  function successEffects(btn){
    btn.style.animation="shake .35s ease";
    document.body.style.animation="shake .35s ease";
    setTimeout(()=>document.body.style.animation="",350);

    const sb=document.createElement("div");
    sb.className="starburst";
    btn.appendChild(sb);

    for(let i=0;i<12;i++){
      const c=document.createElement("div");
      c.className="confetti";
      c.style.background=i%2?"#FFD700":"#FF3300";
      c.style.left=(10+Math.random()*25)+"px";
      c.style.top=(10+Math.random()*25)+"px";
      btn.appendChild(c);
      setTimeout(()=>c.remove(),1300);
    }

    disableOutside(secret,secret);
    winSound();
    showMessage();
  }

  function winSound(){
    winSnd.currentTime=0;
    winSnd.play().catch(()=>{});
  }

  function showMessage(){
    winText.innerHTML=
      `<div class='win-msg'>VOC√ä ACERTOU! PODE VIRAR O COPO üçª</div>`;
  }

  // MENU
  menuBtn.onclick=e=>{
    e.stopPropagation();
    dropdown.classList.toggle("open");
  };
  document.onclick=e=>{
    if(!dropdown.contains(e.target)&&e.target!==menuBtn){
      dropdown.classList.remove("open");
    }
  };

  // Tema
  themeSwitch.onclick=()=>{
    const d=!document.body.classList.contains("dark");
    document.body.classList.toggle("dark",d);
    themeSwitch.classList.toggle("on",d);
    localStorage.setItem(PREF_THEME,d?"dark":"light");
  };

  // Som click
  soundSwitch.onclick=()=>{
    clickSoundEnabled=!clickSoundEnabled;
    soundSwitch.classList.toggle("on",clickSoundEnabled);
    localStorage.setItem(PREF_SOUND,clickSoundEnabled?"on":"off");
  };

  // Restaura prefer√™ncias
  (function(){
    document.body.classList.toggle("dark",localStorage.getItem(PREF_THEME)==="dark");
    themeSwitch.classList.toggle("on",localStorage.getItem(PREF_THEME)==="dark");
    clickSoundEnabled=localStorage.getItem(PREF_SOUND)!=="off";
    soundSwitch.classList.toggle("on",clickSoundEnabled);
  })();

  document.getElementById("restart").onclick=()=>{
    secret=Math.floor(Math.random()*26);
    buildGrid();
  };

  buildGrid();
</script>

</body>
</html>
